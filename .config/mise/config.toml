# mise.toml - Comprehensive Development Environment Configuration

# ==============================================================================
# SETTINGS
# ==============================================================================
[settings]
# UV Package Manager Integration
python.uv_venv_auto = true
python.uv_venv_create_args = ["--seed"]
pipx.uvx = true

# General Settings
experimental = false
always_keep_download = false
always_keep_install = false
plugin_autoupdate_last_check_duration = "7d"
jobs = 4
verbose = false
log_level = "warn"
activate_aggressive = true

# Git integration
gix = false

[settings.status]
show_env = false

# ==============================================================================
# ENVIRONMENT VARIABLES
# ==============================================================================
[env]
PYTHONUNBUFFERED = "1"
UV_FROZEN = "false"
MISE_PYTHON_DEFAULT_PACKAGES_FILE = "$XDG_CONFIG_HOME/mise/.default-python-packages"
MISE_NODE_DEFAULT_PACKAGES_FILE = "$XDG_CONFIG_HOME/mise/.default-npm-packages"
SECRETS_DIR = "$XDG_CONFIG_HOME/security"

_.file = [
  { path = "$HOME/.env", redact = true },
  { path = "$XDG_CONFIG_HOME/security/.env", redact = true },
]


# ============================================================================
# CORE RUNTIME TOOLS (Essential for development)
# ============================================================================
[tools]
# Core runtime
python = "3.13"

# Core runtimes (pin majors/minors when possible for reproducibility)
node = { version = "20.19.6" } # prefer LTS major (adjust to tested minor if needed)
bun = "latest"                 # non-critical runtime; keep latest or pin as needed

# System utilities (pin critical CLIs; others may remain latest)
ripgrep = "latest"
shellcheck = "0.9.0"  # example pin; adjust if you tested a different version
gemini-cli = "latest"
pre-commit = "3.5.0"  # pin to a known stable release

# Node.js packages (grouped by function)
# Code formatting & linting
"npm:prettier" = "3.7.4"
"npm:markdownlint-cli" = "latest"

# Node.js utilities
"npm:npm-check" = "latest"
"npm:npkill" = "latest"

# AI/MCP tools (may have longer install times; keep pinned if dependent on native libs)
"npm:cline" = "latest"
"npm:@google/jules" = "latest"
"npm:@motesoftware/nanocoder" = "latest"
"npm:@pimzino/agentic-tools-mcp" = "latest"

# Misc
"npm:resumed" = "latest"
"npm:jsonresume-theme-even" = "latest"

# Python CLI tools (managed via pipx backend with uvx=true)
# Comments: pin production-critical ones; leave experimental latest
"pipx:basic-memory" = "latest"
"pipx:psf/black" = "23.12.0"
"pipx:gallery-dl" = "latest"
"pipx:khard" = "latest"
"pipx:mac-cleanup" = "latest"
"pipx:osxmetadata" = "latest"
"pipx:pygments" = "2.17.2"
"pipx:rich-cli" = "latest"
"pipx:ruff" = "0.2.0"
"pipx:speedtest-cli" = "latest"
"pipx:yt-dlp" = "latest"
"pipx:twine" = "6.2.0"

[hooks]
preinstall = 'printf "About to install %s@%s\n" "$MISE_TOOL_NAME" "$MISE_TOOL_VERSION"'
enter = '[[ -f $XDG_CONFIG_HOME/security/.env ]] && load-secrets'
postinstall = [
  'printf "âœ… Installed %s@%s\n" "$MISE_TOOL_NAME" "$MISE_TOOL_VERSION"',
  'exec "$XDG_CONFIG_HOME/mise/hooks/mise-validate.sh"',
]
