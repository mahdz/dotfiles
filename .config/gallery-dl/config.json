{
	"extractor":
	{
		"skip": true,
		"sleep": 0,
      "pixiv":
		{
			"base-directory": "~/Downloads/.tmp/gallery-dl",
			"directory": ["{user[id]} {user[account]}"],
			"archive": "~/Downloads/.tmp/gallery-dl/archive.db",
			"filename": "{id}_p{num}.{extension}",
			"refresh-token": "{env[PIXIV_REFRESH_TOKEN]}",
			"metadata": true,
			"tags": "original",
			"skip": "abort:10",
			"postprocessors": ["metadata-pixiv"]
		},

		 "ytdl":
        {
            "#": "enable 'ytdl' extractor",
            "#": "i.e. invoke ytdl on all otherwise unsupported input URLs",
            "enabled": true,

            "#": "use yt-dlp instead of youtube-dl",
            "module": "yt_dlp",

            "#": "load ytdl options from config file",
            "config-file": "~/.config/yt-dlp/config"
        }


	},

	"downloader":
    {
        "#": "restrict download speed to 1 MB/s",
        "rate": "1M",

        "#": "show download progress indicator after 2 seconds",
        "progress": 2.0,

        "#": "retry failed downloads up to 3 times",
        "retries": 3,

        "#": "consider a download 'failed' after 8 seconds of inactivity",
        "timeout": 8.0,

        "#": "write '.part' files into a special directory",
        "part-directory": "~/Downloads/.tmp/gallery-dl/tmp/.download/",

        "#": "do not update file modification times",
        "mtime": false,

        "ytdl":
        {
            "#": "use yt-dlp instead of youtube-dl",
            "module": "yt_dlp"
        }
    },

    "output":
    {
        "log": {
            "level": "info",

            "#": "use different ANSI colors for each log level",
            "format": {
                "debug"  : "\u001b[0;37m{name}: {message}\u001b[0m",
                "info"   : "\u001b[1;37m{name}: {message}\u001b[0m",
                "warning": "\u001b[1;33m{name}: {message}\u001b[0m",
                "error"  : "\u001b[1;31m{name}: {message}\u001b[0m"
            }
        },

        "#": "shorten filenames to fit into one terminal line",
        "#": "while also considering wider East-Asian characters",
        "shorten": "eaw",

        "#": "enable ANSI escape sequences on Windows",
        "ansi": true,

        "#": "write logging messages to a separate file",
        "logfile": {
            "path": "~/gallery-dl/log.txt",
            "mode": "w",
            "level": "debug"
        },

        "#": "write unrecognized URLs to a separate file",
        "unsupportedfile": {
            "path": "~/gallery-dl/unsupported.txt",
            "mode": "a",
            "format": "{asctime} {message}",
            "format-date": "%Y-%m-%d-%H-%M-%S"
        }
    },

	"postprocessor":
	{
		"metadata-pixiv":
		{
			"name": "metadata",
			"mode": "json",
			"event": "post",
			"filename": "{id}.json"
		},
		"#": "various ugoira post processor configurations to create different file formats",
        "ugoira-webm":
        {
            "name": "ugoira",
            "extension": "webm",
            "ffmpeg-args": ["-c:v", "libvpx-vp9", "-an", "-b:v", "0", "-crf", "30"],
            "ffmpeg-twopass": true,
            "ffmpeg-demuxer": "image2"
        },
        "ugoira-mp4":
        {
            "name": "ugoira",
            "extension": "mp4",
            "ffmpeg-args": ["-c:v", "libx264", "-an", "-b:v", "4M", "-preset", "veryslow"],
            "ffmpeg-twopass": true,
            "libx264-prevent-odd": true
        },
        "ugoira-gif":
        {
            "name": "ugoira",
            "extension": "gif",
            "ffmpeg-args": ["-filter_complex", "[0:v] split [a][b];[a] palettegen [p];[b][p] paletteuse"]
        },
        "ugoira-copy": {
            "name": "ugoira",
            "extension": "mkv",
            "ffmpeg-args": ["-c", "copy"],
            "libx264-prevent-odd": false,
            "repeat-last-frame": false
        }
	},

	"output":
	{
		"skip": false
	}
}
